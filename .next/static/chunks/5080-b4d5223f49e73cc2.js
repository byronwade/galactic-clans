"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5080],{5080:(e,t,r)=>{r.d(t,{CriticalErrorBoundary:()=>x,qw:()=>p});var s=r(5155),a=r(2115),o=r(1243),i=r(4738),n=r(1177),l=r(4186),c=r(3904),d=r(7340),m=r(446);class h extends a.Component{static getDerivedStateFromError(e){let t="err_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),r=new Date().toISOString(),s={};if("memory"in performance&&(s.memory=performance.memory.usedJSHeapSize/1024/1024),performance.timing){let e=performance.timing;s.renderTime=e.loadEventEnd-e.navigationStart}return{hasError:!0,error:e,errorId:t,timestamp:r,performanceMetrics:s,url:window.location.href}}componentDidCatch(e,t){console.group("\uD83D\uDEA8 Error Boundary Caught Error"),console.error("Error:",e),console.error("Error Info:",t),console.error("Component Stack:",t.componentStack),console.error("Error ID:",this.state.errorId),console.error("Timestamp:",this.state.timestamp),console.error("URL:",this.state.url),console.error("Performance Metrics:",this.state.performanceMetrics),console.groupEnd(),this.setState({errorInfo:t,performanceMetrics:{...this.state.performanceMetrics,...this.collectAdditionalMetrics()}}),this.props.onError&&this.props.onError(e,t),this.reportError(e,t)}collectAdditionalMetrics(){let e={};if("connection"in navigator){let t=navigator.connection;e.networkType=t.effectiveType,e.downlink=t.downlink}return e.deviceMemory=navigator.deviceMemory,e.hardwareConcurrency=navigator.hardwareConcurrency,e}reportError(e,t){let r={errorId:this.state.errorId,timestamp:this.state.timestamp,error:{name:e.name,message:e.message,stack:e.stack},errorInfo:{componentStack:t.componentStack},context:{url:this.state.url,userAgent:this.state.userAgent,performanceMetrics:this.state.performanceMetrics},level:this.props.level||"component"};try{let e=JSON.parse(localStorage.getItem("galactic-clans-errors")||"[]");e.push(r),e.length>10&&e.splice(0,e.length-10),localStorage.setItem("galactic-clans-errors",JSON.stringify(e))}catch(e){console.warn("Failed to store error report locally:",e)}}componentWillUnmount(){this.retryTimeoutId&&clearTimeout(this.retryTimeoutId)}render(){if(this.state.hasError){var e;if(this.props.fallback)return this.props.fallback;let t=this.getErrorSeverity(),r=this.state.retryCount<this.maxRetries;return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-red-950 to-black flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-2xl w-full bg-slate-900/95 backdrop-blur-xl border border-red-400/30 rounded-lg shadow-2xl",children:[(0,s.jsx)("div",{className:"p-6 border-b border-red-400/20 bg-gradient-to-r from-red-900/50 to-orange-900/50",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-red-500/20 rounded-lg",children:(0,s.jsx)(o.A,{className:"w-6 h-6 text-red-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-white",children:"critical"===t?"Critical Error":"Something went wrong"}),(0,s.jsx)("p",{className:"text-red-300 text-sm",children:"critical"===t?"A critical error occurred that requires immediate attention":"An unexpected error occurred in the application"})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-slate-800/50 border border-slate-600/50 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-white mb-2",children:"Error Summary"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-400",children:"Error Type:"}),(0,s.jsx)("span",{className:"text-white font-mono",children:(null==(e=this.state.error)?void 0:e.name)||"Unknown"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-400",children:"Error ID:"}),(0,s.jsx)("span",{className:"text-white font-mono",children:this.state.errorId})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-400",children:"Timestamp:"}),(0,s.jsx)("span",{className:"text-white font-mono",children:new Date(this.state.timestamp).toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-400",children:"Retry Attempts:"}),(0,s.jsxs)("span",{className:"text-white font-mono",children:[this.state.retryCount,"/",this.maxRetries]})]})]})]}),Object.keys(this.state.performanceMetrics).length>0&&(0,s.jsxs)("div",{className:"bg-slate-800/50 border border-slate-600/50 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"font-semibold text-white mb-2 flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"w-4 h-4"}),"System Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[this.state.performanceMetrics.memory&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.A,{className:"w-3 h-3 text-slate-400"}),(0,s.jsx)("span",{className:"text-slate-400",children:"Memory:"}),(0,s.jsxs)("span",{className:"text-white font-mono",children:[this.state.performanceMetrics.memory.toFixed(1),"MB"]})]}),this.state.performanceMetrics.renderTime&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.A,{className:"w-3 h-3 text-slate-400"}),(0,s.jsx)("span",{className:"text-slate-400",children:"Load Time:"}),(0,s.jsxs)("span",{className:"text-white font-mono",children:[this.state.performanceMetrics.renderTime,"ms"]})]})]})]}),this.props.showDetails&&this.state.error&&(0,s.jsxs)("details",{className:"bg-slate-800/50 border border-slate-600/50 rounded-lg",children:[(0,s.jsx)("summary",{className:"p-4 cursor-pointer text-white font-semibold hover:bg-slate-700/30",children:"Technical Details"}),(0,s.jsx)("div",{className:"p-4 border-t border-slate-600/50",children:(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-slate-400",children:"Message:"}),(0,s.jsx)("pre",{className:"mt-1 p-2 bg-slate-900 rounded text-red-300 text-xs overflow-x-auto",children:this.state.error.message})]}),this.state.error.stack&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-slate-400",children:"Stack Trace:"}),(0,s.jsx)("pre",{className:"mt-1 p-2 bg-slate-900 rounded text-slate-300 text-xs overflow-x-auto max-h-32",children:this.state.error.stack})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"font-semibold text-white",children:"Recovery Options"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r&&(0,s.jsxs)("button",{onClick:this.handleRetry,disabled:this.state.isRecovering,className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:opacity-50 text-white rounded-lg transition-colors",children:[(0,s.jsx)(c.A,{className:"w-4 h-4 ".concat(this.state.isRecovering?"animate-spin":"")}),this.state.isRecovering?"Recovering...":"Try Again"]}),(0,s.jsxs)("button",{onClick:this.handleReload,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,s.jsx)(c.A,{className:"w-4 h-4"}),"Reload Page"]}),(0,s.jsxs)("button",{onClick:this.handleGoHome,className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors",children:[(0,s.jsx)(d.A,{className:"w-4 h-4"}),"Go Home"]}),(0,s.jsxs)("button",{onClick:this.handleReportBug,className:"flex items-center justify-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors",children:[(0,s.jsx)(m.A,{className:"w-4 h-4"}),"Report Bug"]})]})]}),(0,s.jsx)("div",{className:"text-xs text-slate-400 bg-slate-800/30 rounded-lg p-3",children:(0,s.jsx)("p",{children:'If this error persists, please try refreshing the page or restarting the application. For technical support, use the "Report Bug" button above to send error details to our team.'})})]})]})})}return this.props.children}getErrorSeverity(){if("critical"===this.props.level)return"critical";let e=this.state.error;return e?"ChunkLoadError"===e.name||e.message.includes("Loading chunk")?"medium":e.message.includes("WebGL")||e.message.includes("Three")?"high":("TypeError"===e.name&&e.message.includes("Cannot read property"),"medium"):"low"}constructor(e){super(e),this.retryTimeoutId=null,this.maxRetries=3,this.handleRetry=()=>{if(this.state.retryCount>=this.maxRetries)return void console.warn("Maximum retry attempts reached");this.setState({isRecovering:!0,retryCount:this.state.retryCount+1}),this.retryTimeoutId=setTimeout(()=>{this.setState({hasError:!1,error:null,errorInfo:null,isRecovering:!1})},1e3)},this.handleReload=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/"},this.handleReportBug=()=>{{var e,t;let r={id:this.state.errorId,error:null==(e=this.state.error)?void 0:e.message,timestamp:this.state.timestamp,url:this.state.url},s="Bug Report: ".concat(null==(t=this.state.error)?void 0:t.name," - ").concat(this.state.errorId),a="Error Details:\n".concat(JSON.stringify(r,null,2));window.open("mailto:support@galactic-clans.com?subject=".concat(encodeURIComponent(s),"&body=").concat(encodeURIComponent(a)))}},this.state={hasError:!1,error:null,errorInfo:null,errorId:"",timestamp:"",userAgent:window.navigator.userAgent,url:window.location.href,performanceMetrics:{},retryCount:0,isRecovering:!1}}}let p=e=>{let{children:t,name:r}=e;return(0,s.jsx)(h,{level:"component",showDetails:!1,fallback:(0,s.jsx)("div",{className:"p-4 bg-slate-800/50 border border-red-400/30 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-red-400",children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),(0,s.jsxs)("span",{className:"text-sm",children:["Error in ",r||"component"]})]})}),children:t})},x=e=>{let{children:t}=e;return(0,s.jsx)(h,{level:"critical",showDetails:!0,children:t})}}}]);